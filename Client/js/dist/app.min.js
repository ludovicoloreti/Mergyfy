var app=angular.module("tutorialWebApp",["ngRoute","ngMap","naif.base64"]);app.config(["$routeProvider",function(t){t.when("/",{templateUrl:"partials/home.html",controller:"HomeCtrl"}).when("/events",{templateUrl:"partials/events.html",controller:"EventsCtrl"}).when("/doc",{templateUrl:"partials/document.html",controller:"DocCtrl"}).when("/profile",{templateUrl:"partials/profile.html",controller:"ProfileCtrl"}).when("/groups",{templateUrl:"partials/groups.html",controller:"GroupsCtrl"}).when("/addevent",{templateUrl:"partials/addevent.html",controller:"EventCtrl"}).when("/event/:id",{templateUrl:"partials/event.html",controller:"GetEventCtrl",resolve:{Evento:["$routeParams",function(t){return t}]}}).when("/group",{templateUrl:"partials/group.html",controller:"GroupCtrl"}).when("/addgroup",{templateUrl:"partials/addgroup.html",controller:"AddGroupCtrl"}).when("/blog",{templateUrl:"partials/blog.html",controller:"BlogCtrl"}).when("/blog/post",{templateUrl:"partials/blog_item.html",controller:"BlogCtrl"}).otherwise("/404",{templateUrl:"partials/404.html",controller:"PageCtrl"})}]),app.run(["$rootScope","NgMap",function(t,l){window.localStorage.id=1,t.url="http://localhost:8888/Mergify/Server_v02/handler.php",l.getMap().then(function(l){t.map=l})}]);
app.controller("AddGroupCtrl",["$scope","$location","$http","$rootScope",function(o,t,p,c){}]);
app.controller("DocCtrl",["$scope","$rootScope","$http",function(o,t,e){o.toggle=!1,o.toggleView=function(){o.toggle=!o.toggle},o.title="",o.text="";var c={};console.log(c),o.addNodo=function(o){console.log(o);var l=t.url+"?action=createNote&model=lol";c.type=o.type,c.title=o.title,c.content=o.content,c.description=o.description,c.docid="1",e.post(l,c).success(function(o){console.log(o)}).error(function(o){console.log(o)})}}]);
app.controller("EventCtrl",["$rootScope","$scope","$http","$window",function(o,e,t,n){console.log("ciao"),e.custom=!0,e.toggleCustom=function(){e.custom=e.custom===!1};var r=o.url+"?user_id="+window.localStorage.id;t.get(r).success(function(o){e.gruppi=o}).error(function(o){console.log(o),e.gruppi=[{nome:"Errore",id:1},{nome:"Nella",id:2},{nome:"Get",id:3}]}),e.createEvent=function(o){if(console.log("createEvent"),angular.isUndefined(o))console.log("Errore nell'invio del form","Il form risulta essere vuoto.");else if(count=0,angular.forEach(o,function(o,e){count++}),10===count||11===count||13===count){console.log(JSON.stringify(o));var n="http://maps.google.com/maps/api/geocode/json?address="+o.address+"+"+o.city+"&sensor=false";t.get(n).success(function(n){console.log(n.results[0].geometry.location),o.lat=n.results[0].geometry.location.lat,o.lng=n.results[0].geometry.location.lng;var r="http://localhost:8888/Mergify/Server/handler.php?action=addEvent&model=event";t.post(r,o).success(function(o,t,n,r){console.info(JSON.stringify(o)),e.data=o}).error(function(o,e,t,n){console.log(o,n),alert("Errore nell'invio della POST: "+JSON.stringify({data:o}))})}).error(function(o){alert("Errore nell'invio della POST: "+JSON.stringify({data:o}))})}else console.log("Errore conteggio dati","Non hai compilato tutti i campi!")}}]);
app.controller("EventsCtrl",["$scope","$rootScope","$compile","$window","$http","NgMap",function(o,t,e,a,n,i){function s(){this.map.getCenter();google.maps.event.trigger(map,"resize"),navigator.geolocation.getCurrentPosition(function(t){o.$apply(function(){latt=parseFloat(t.coords.latitude),lonn=parseFloat(t.coords.longitude)})}),map.setCenter(latt,lonn)}o.eventsNavbar=!0,o.changeEvents=function(t){o.eventsNavbar=t},obj={},data={},data.user_id=parseInt(window.localStorage.id),obj.action="userNearEvents",navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){o.$apply(function(){data.latitude=parseFloat(e.coords.latitude),data.longitude=parseFloat(e.coords.longitude),o.latitudine=data.latitude,o.longitudine=data.longitude,data.dist=parseInt("100"),obj.data=data,console.log("Posizione presa! ",obj),n.post(t.url,[obj]).success(function(e){console.log(e[0].data),o.eventiVicini=e[0].data,objj={},data={},objj.action="getUserEvents",data.user_id=parseInt(window.localStorage.id),data.which="all",objj.data=data,console.log(objj),n.post(t.url,[objj]).success(function(t){console.log(t[0].data),o.eventiPartecipo=t[0].data}).error(function(o){console.log(o,"Errore in getUserEvents")})}).error(function(o){console.log(o,"Errore userNearEvents")})})}):(console.log("else"),data.latitude=parseInt("0"),data.longitude=parseInt("0"),data.dist=parseInt("100"),obj.data=data,console.log("Nessuna posizione presa ",obj),n.post(urlToNearEventsZero,obj).success(function(t){console.log(t),o.eventiVicini=t}).error(function(o){console.log(o)})),o.gotoEvent=function(o){window.location.href="#/event/"+parseInt(o)},i.getMap().then(function(t){o.map=t,o.detail=function(t,e){o.eventoVic=e,console.log(t),o.map.showInfoWindow("infoW",this)},console.log("markers",t.markers)}),google.maps.event.addDomListener(window,"resize",s)}]);
app.controller("GetEventCtrl",["$rootScope","$scope","$http","$window","Evento",function(o,t,a,e,n){console.log(n.id),obj={},data={},obj[0].action="getEvent",data.event_id=parseInt(n.id),data.user_id=parseInt(window.localStorage.id),obj[0].data=data,obj[1].action="getPartecipant",obj[1].data=data.event_id,console.log(JSON.stringify(obj)),a.post(o.url,[obj]).success(function(o){for(console.log(o[0].data),ress=o[0].data,i=0;i<ress.length;i++)t.evento=ress[i]}).error(function(o){console.log(o,"non vaaaa")}),t.openMap=function(o,t){var a="http://maps.apple.com/maps?q="+t.latitude+","+t.longitude;e.location.href=a,e.open(a,"_system","location=no")}}]);
app.controller("GroupCtrl",["$scope","$rootScope",function(o,t){o.edit=!1,o.editGroup=function(){o.edit=!0},o.saveChanges=function(){o.edit=!1}}]);
app.controller("GroupsCtrl",["$scope","$location","$http","$rootScope",function(o,l,t,p){o.lol="lololol"}]);
app.controller("HomeCtrl",["$scope",function(o){o.clock=new Date}]);
app.controller("ProfileCtrl",function(){console.log("Prof Controller reporting for duty."),$(".carousel").carousel({interval:5e3}),$(".tooltip-social").tooltip({selector:"a[data-toggle=tooltip]"})});
app.directive("stringToTimestamp",function(){return{require:"ngModel",link:function(e,n,r,i){i.$parsers.push(function(e){return Date.parse(e)})}}});